\hypertarget{classCalcu__sensitivity_1_1Calcsensitivity}{}\section{Calcu\+\_\+sensitivity.\+Calcsensitivity Class Reference}
\label{classCalcu__sensitivity_1_1Calcsensitivity}\index{Calcu\+\_\+sensitivity.\+Calcsensitivity@{Calcu\+\_\+sensitivity.\+Calcsensitivity}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a9bf566a9069b3efcb5bb388aa87f86c0}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, obsf, meshf)
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a4b1fd897d17dde2abc328282bb4df5d2}{pre\+\_\+work} (self)
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a7441d0b4067ad69833a78eb21461d596}{calc\+\_\+single\+\_\+ray} (self, y0, x0, z0, theta0, phi0, need\+\_\+consider\+\_\+xy\+\_\+ray, need\+\_\+record\+\_\+unused\+\_\+ray=True, args=())
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a2bb4f42d1e79c2b6d62f16a84685ba61}{calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number} (self, number, need\+\_\+consider\+\_\+xy\+\_\+ray=True)
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a4303bc1d11d8cad584594f8b9584914d}{calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det} (self, det\+\_\+des\+\_\+list)
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_aede00bb6135485d40e67980414bf1ebc}{calcsensitivity} (self, ijf, Ray\+\_\+way\+\_\+j\+\_\+file, loger, need\+\_\+consider\+\_\+xy\+\_\+ray=True, isprint=True)
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_aeaf0cb729f018bdb1a0db49b64ea8359}\label{classCalcu__sensitivity_1_1Calcsensitivity_aeaf0cb729f018bdb1a0db49b64ea8359}} 
def {\bfseries recover} (self)
\item 
def \hyperlink{classCalcu__sensitivity_1_1Calcsensitivity_a6a9a7e006d3766b4c46db8d922d5853f}{storage\+\_\+used\+\_\+ray} (self, used\+\_\+abspath)
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a1bf8f17dae24038b4549ce2f2fe0998d}\label{classCalcu__sensitivity_1_1Calcsensitivity_a1bf8f17dae24038b4549ce2f2fe0998d}} 
def {\bfseries print\+\_\+data} (self, loger)
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a5e4058aac5ad5b4664b954583d1129b1}\label{classCalcu__sensitivity_1_1Calcsensitivity_a5e4058aac5ad5b4664b954583d1129b1}} 
def {\bfseries loger\+\_\+data} (self, loger)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a410dad3b051b05eb454552d9c79e7ff1}\label{classCalcu__sensitivity_1_1Calcsensitivity_a410dad3b051b05eb454552d9c79e7ff1}} 
{\bfseries obs\+\_\+abspath}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_ae0cc62c3407680adddb3b27e7b26aa51}\label{classCalcu__sensitivity_1_1Calcsensitivity_ae0cc62c3407680adddb3b27e7b26aa51}} 
{\bfseries mesh\+\_\+abspath}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_adb80fe19ed417c1614e5fac4b19881a2}\label{classCalcu__sensitivity_1_1Calcsensitivity_adb80fe19ed417c1614e5fac4b19881a2}} 
{\bfseries cell\+\_\+entity}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a756f49826aa51d2d83989a80f40ec673}\label{classCalcu__sensitivity_1_1Calcsensitivity_a756f49826aa51d2d83989a80f40ec673}} 
{\bfseries x\+\_\+node}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_ae19f939fc122e6acadecd7153193012c}\label{classCalcu__sensitivity_1_1Calcsensitivity_ae19f939fc122e6acadecd7153193012c}} 
{\bfseries y\+\_\+node}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a14862443f07daa63e659e4144349fc7e}\label{classCalcu__sensitivity_1_1Calcsensitivity_a14862443f07daa63e659e4144349fc7e}} 
{\bfseries z\+\_\+node}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a533e6461a0ecc423a41eb7c65672fdeb}\label{classCalcu__sensitivity_1_1Calcsensitivity_a533e6461a0ecc423a41eb7c65672fdeb}} 
{\bfseries mx}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a0965407df6ffac24ffe2b53b61c5aab0}\label{classCalcu__sensitivity_1_1Calcsensitivity_a0965407df6ffac24ffe2b53b61c5aab0}} 
{\bfseries my}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a96a974fe3a188cc35593d23c238a8658}\label{classCalcu__sensitivity_1_1Calcsensitivity_a96a974fe3a188cc35593d23c238a8658}} 
{\bfseries mz}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a14a833c40794558e27501040a6b879a9}\label{classCalcu__sensitivity_1_1Calcsensitivity_a14a833c40794558e27501040a6b879a9}} 
{\bfseries h\+\_\+list}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a81dfe4eb09ececdf4e7c93d8736be29c}\label{classCalcu__sensitivity_1_1Calcsensitivity_a81dfe4eb09ececdf4e7c93d8736be29c}} 
{\bfseries x\+\_\+list}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_ab87dee59eee04bb0171c113d56db515e}\label{classCalcu__sensitivity_1_1Calcsensitivity_ab87dee59eee04bb0171c113d56db515e}} 
{\bfseries y\+\_\+list}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_abe84d9fdcda0260e7deaab66c6a0617a}\label{classCalcu__sensitivity_1_1Calcsensitivity_abe84d9fdcda0260e7deaab66c6a0617a}} 
{\bfseries h\+\_\+unused\+\_\+ray}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a774aa938b62ce2a80c97f47d7a607c44}\label{classCalcu__sensitivity_1_1Calcsensitivity_a774aa938b62ce2a80c97f47d7a607c44}} 
{\bfseries x\+\_\+unused\+\_\+ray}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a8402e2b0704bb29e542ac0a8001a8e3a}\label{classCalcu__sensitivity_1_1Calcsensitivity_a8402e2b0704bb29e542ac0a8001a8e3a}} 
{\bfseries y\+\_\+unused\+\_\+ray}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_aa635c17cfe0c1f14d92404a5f8a7ec6c}\label{classCalcu__sensitivity_1_1Calcsensitivity_aa635c17cfe0c1f14d92404a5f8a7ec6c}} 
{\bfseries n\+\_\+dat}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a1f9f7b7610fd65472ba74505b4631d77}\label{classCalcu__sensitivity_1_1Calcsensitivity_a1f9f7b7610fd65472ba74505b4631d77}} 
{\bfseries det\+\_\+ray}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_af5f2a68877b822a782937631f16e6f4a}\label{classCalcu__sensitivity_1_1Calcsensitivity_af5f2a68877b822a782937631f16e6f4a}} 
{\bfseries elev0}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a09ef3064322ac263c7ca530534c7971c}\label{classCalcu__sensitivity_1_1Calcsensitivity_a09ef3064322ac263c7ca530534c7971c}} 
{\bfseries used\+\_\+ray\+\_\+cross\+\_\+cell}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_ac8254b6d67697fe1c84af3cc7f09d8a7}\label{classCalcu__sensitivity_1_1Calcsensitivity_ac8254b6d67697fe1c84af3cc7f09d8a7}} 
{\bfseries det\+\_\+used\+\_\+ray}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_abfc8b7dce533f9068cf3051a57606ac2}\label{classCalcu__sensitivity_1_1Calcsensitivity_abfc8b7dce533f9068cf3051a57606ac2}} 
{\bfseries file\+\_\+data}
\item 
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a8059b8d8961ed086ebafc603b5829d2d}\label{classCalcu__sensitivity_1_1Calcsensitivity_a8059b8d8961ed086ebafc603b5829d2d}} 
{\bfseries loger}
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a9bf566a9069b3efcb5bb388aa87f86c0}\label{classCalcu__sensitivity_1_1Calcsensitivity_a9bf566a9069b3efcb5bb388aa87f86c0}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{obsf,  }\item[{}]{meshf }\end{DoxyParamCaption})}

\begin{DoxyVerb}:param obsf: obs文件的路径
:param meshf: mesh文件的路径
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a4303bc1d11d8cad584594f8b9584914d}\label{classCalcu__sensitivity_1_1Calcsensitivity_a4303bc1d11d8cad584594f8b9584914d}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det@{calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det}}
\index{calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det@{calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det()}{calc\_single\_or\_multiple\_det()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+calc\+\_\+single\+\_\+or\+\_\+multiple\+\_\+det (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{det\+\_\+des\+\_\+list }\end{DoxyParamCaption})}

\begin{DoxyVerb}单个或多个探测器

:param det_des_list: 探测器列表,可单可多
\end{DoxyVerb}
 \mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a7441d0b4067ad69833a78eb21461d596}\label{classCalcu__sensitivity_1_1Calcsensitivity_a7441d0b4067ad69833a78eb21461d596}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!calc\+\_\+single\+\_\+ray@{calc\+\_\+single\+\_\+ray}}
\index{calc\+\_\+single\+\_\+ray@{calc\+\_\+single\+\_\+ray}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{calc\+\_\+single\+\_\+ray()}{calc\_single\_ray()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+calc\+\_\+single\+\_\+ray (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{y0,  }\item[{}]{x0,  }\item[{}]{z0,  }\item[{}]{theta0,  }\item[{}]{phi0,  }\item[{}]{need\+\_\+consider\+\_\+xy\+\_\+ray,  }\item[{}]{need\+\_\+record\+\_\+unused\+\_\+ray = {\ttfamily True},  }\item[{}]{args = {\ttfamily ()} }\end{DoxyParamCaption})}

\begin{DoxyVerb}!此方法会因为参数导致假执行 弃用
计算单条射线

为方便表述，下文中的xy方向均指x正方向、x负方向、y正方向、y负方向;x方向指x正方向、x负方向;y方向指y正方向、y负方向

need_consider_xy_ray(是否考虑xy方向)和need_record_unused_ray(是否记录未使用的射线)两者之间的关系为：

1 当need_consider_xy_ray=True时:
1.1 need_record_unused_ray=True,记录近乎水平的射线
1.2 need_record_unused_ray=False,不记录
2 当need_consider_xy_ray=False时:
2.1 need_record_unused_ray=True,记录近乎水平的射线、x方向的射线、y方向的射线
2.2 need_record_unused_ray=False,不记录

:param y0: 探测器的y坐标
:param x0: 探测器的x坐标
:param z0: 探测器的z坐标
:param theta0: 射线的角度(和水平面xoy的夹角)
:param phi0: 射线的角度(和y轴的夹角,因为相当于已经投影到水平面xoy了)
:param need_record_unused_ray: 是否记录未使用的射线
:param need_consider_xy_ray: 从xy方向穿出的射线是否需要考虑,为true时考虑,即结果包含此类射线,false不包含
:param args:
:return: [该条射线是否可用(False:直接进行下一条,True:该条可用)，射线穿过哪些格子，射线穿过格子的实际长度]
\end{DoxyVerb}
 \mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a2bb4f42d1e79c2b6d62f16a84685ba61}\label{classCalcu__sensitivity_1_1Calcsensitivity_a2bb4f42d1e79c2b6d62f16a84685ba61}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number@{calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number}}
\index{calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number@{calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number()}{calc\_single\_ray\_from\_number()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+calc\+\_\+single\+\_\+ray\+\_\+from\+\_\+number (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{number,  }\item[{}]{need\+\_\+consider\+\_\+xy\+\_\+ray = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}obs文件的第几行，即第几条射线，从1开始

:param number: 射线编号
:param need_consider_xy_ray: 同calc_single_ray
\end{DoxyVerb}
 \mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_aede00bb6135485d40e67980414bf1ebc}\label{classCalcu__sensitivity_1_1Calcsensitivity_aede00bb6135485d40e67980414bf1ebc}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!calcsensitivity@{calcsensitivity}}
\index{calcsensitivity@{calcsensitivity}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{calcsensitivity()}{calcsensitivity()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+calcsensitivity (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{ijf,  }\item[{}]{Ray\+\_\+way\+\_\+j\+\_\+file,  }\item[{}]{loger,  }\item[{}]{need\+\_\+consider\+\_\+xy\+\_\+ray = {\ttfamily True},  }\item[{}]{isprint = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb}计算射线穿过格子的长度ijg

:param ijf: ij文件的路径，当ijf为None时，默认会存放在obsf所在的文件夹下的ij文件中，i和j均是从1开始的
:param Ray_way_j_file: 正常射线穿过的格子编号
:param loger: 输出的格式
:param need_consider_xy_ray: 同calc_single_ray
:param isprint: 是否打印
\end{DoxyVerb}
 \mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a4b1fd897d17dde2abc328282bb4df5d2}\label{classCalcu__sensitivity_1_1Calcsensitivity_a4b1fd897d17dde2abc328282bb4df5d2}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!pre\+\_\+work@{pre\+\_\+work}}
\index{pre\+\_\+work@{pre\+\_\+work}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{pre\+\_\+work()}{pre\_work()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+pre\+\_\+work (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}提前准备的工作\end{DoxyVerb}
 \mbox{\Hypertarget{classCalcu__sensitivity_1_1Calcsensitivity_a6a9a7e006d3766b4c46db8d922d5853f}\label{classCalcu__sensitivity_1_1Calcsensitivity_a6a9a7e006d3766b4c46db8d922d5853f}} 
\index{Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}!storage\+\_\+used\+\_\+ray@{storage\+\_\+used\+\_\+ray}}
\index{storage\+\_\+used\+\_\+ray@{storage\+\_\+used\+\_\+ray}!Calcu\+\_\+sensitivity\+::\+Calcsensitivity@{Calcu\+\_\+sensitivity\+::\+Calcsensitivity}}
\subsubsection{\texorpdfstring{storage\+\_\+used\+\_\+ray()}{storage\_used\_ray()}}
{\footnotesize\ttfamily def Calcu\+\_\+sensitivity.\+Calcsensitivity.\+storage\+\_\+used\+\_\+ray (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{used\+\_\+abspath }\end{DoxyParamCaption})}

\begin{DoxyVerb}正常射线穿过的格子编号

:param used_abspath:
:return:
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Muon\+\_\+\+Imaging\+\_\+\+Algorithm/\+Inv\+Data\+Tools/calculate/old/Calcu\+\_\+sensitivity.\+py\end{DoxyCompactItemize}
