\hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode}{}\section{M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode Class Reference}
\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode}\index{M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode@{M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode}}


Inheritance diagram for M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=274pt]{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=274pt]{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a05573d6d91e6a97a37e302e2ef3788d5}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a05573d6d91e6a97a37e302e2ef3788d5}} 
def {\bfseries \+\_\+\+\_\+init\+\_\+\+\_\+} (self)
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a1310b3befcb52dbea9b170e41e4aaca0}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a1310b3befcb52dbea9b170e41e4aaca0}} 
def {\bfseries re\+Initialize} (self)
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a1bf15d2d3079f2a40be7bdd55573f2f6}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a1bf15d2d3079f2a40be7bdd55573f2f6}} 
def {\bfseries set\+Read\+Size}
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a40faa0a87f0c11951640d66838ef6965}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a40faa0a87f0c11951640d66838ef6965}} 
def {\bfseries set\+Check\+Mode}
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a02ba970c665bc6aee5faedf9cc379bf4}{bad\+Package} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a3508687b0b1a5bdb3e1667de3f18357d}{event\+Count} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a88bc70f8bd15c217eb8c2486f2788821}{total\+Count} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_add0f30cbf6de5e57c27996a44659da81}{read\+Size} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a99518aedc2ae8e974dc88593ecec63f0}{dev\+Status} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a79ada4be365b12d4010385947c16e6f1}{decoding\+One\+Event\+Data} (self)
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a8a26cb0681a32eca90be17d71bc2cf64}{decoding\+One\+Event\+Data\+\_\+non\+Blocking} (self)
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a2634128ee42cef032a40f7d92fa31227}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a2634128ee42cef032a40f7d92fa31227}} 
def {\bfseries find\+S\+S\+P2\+E\+Index}
\item 
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a5565e250a819f357977619f6bae0714b}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a5565e250a819f357977619f6bae0714b}} 
def {\bfseries load\+Binary\+Data}
\item 
def \hyperlink{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_abec17520982f010a6364f849b4a84c00}{put\+Stop\+Order} (self)
\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a02ba970c665bc6aee5faedf9cc379bf4}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a02ba970c665bc6aee5faedf9cc379bf4}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!bad\+Package@{bad\+Package}}
\index{bad\+Package@{bad\+Package}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{bad\+Package()}{badPackage()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+bad\+Package (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tuple }\end{DoxyParamCaption})}

\begin{DoxyVerb}返回坏包的数量
:return: tuple(空包数,中断次数,无法识别包数)
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a79ada4be365b12d4010385947c16e6f1}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a79ada4be365b12d4010385947c16e6f1}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!decoding\+One\+Event\+Data@{decoding\+One\+Event\+Data}}
\index{decoding\+One\+Event\+Data@{decoding\+One\+Event\+Data}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{decoding\+One\+Event\+Data()}{decodingOneEventData()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+decoding\+One\+Event\+Data (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tuple }\end{DoxyParamCaption})}

\begin{DoxyVerb}解析一个事件的数据,当数据不足时会阻塞
当解析到终止信息-1时会抛出异常
======THE FORMAT OF SOURCE=====
---------DATA PART-------------
NAME    ROW     SIZE    LOCAL
HAED    1ROW    2Bytes  0-1
HGain   36ROW   72Bytes 2-73
LGain   36ROW   72Bytes 74-145
BCID    1ROW    2Bytes  146-147
ChipID  1ROW    2Bytes  148-149
Temp    1ROW    2Bytes  150-151
Trigger 1ROW    2Bytes  151-153
TAIL    1ROW    4Bytes  154-157
---------STATUS PART-----------
TrigDAC 1ROW    2Bytes  158-159 0-1
INDAC   1ROW    2Bytes  160-161 2-3
TrigMode1ROW    2Bytes  162-163 4-5
BoardID 1ROW    2Bytes  164-165 6-7
TOTAL SIZE: 166

======RETURN DATA FORMAT=====
shape   (n, 40)
---------AXIS 0----------
board   0~n
---------AXIS 1-----------
NAME            LENGTH
CHARGE          36
Temp            1
TrigID          1
BOARDID         1
TimeTage        1
TOTAL LENGTH:   40
---------------------------
DATA TYPE:  np.array
dtype:      uint16
:return: np.array:all the valid board data in one event,shape(n,39)
np.array: timeTag, shape(n,)
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a8a26cb0681a32eca90be17d71bc2cf64}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a8a26cb0681a32eca90be17d71bc2cf64}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!decoding\+One\+Event\+Data\+\_\+non\+Blocking@{decoding\+One\+Event\+Data\+\_\+non\+Blocking}}
\index{decoding\+One\+Event\+Data\+\_\+non\+Blocking@{decoding\+One\+Event\+Data\+\_\+non\+Blocking}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{decoding\+One\+Event\+Data\+\_\+non\+Blocking()}{decodingOneEventData\_nonBlocking()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+decoding\+One\+Event\+Data\+\_\+non\+Blocking (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tuple }\end{DoxyParamCaption})}

\begin{DoxyVerb}解析一个事件的数据,当数据不足时返回（None,None)，不会阻塞
======THE FORMAT OF SOURCE=====
---------DATA PART-------------
NAME    ROW     SIZE    LOCAL
HAED    1ROW    2Bytes  0-1
HGain   36ROW   72Bytes 2-73
LGain   36ROW   72Bytes 74-145
BCID    1ROW    2Bytes  146-147
ChipID  1ROW    2Bytes  148-149
Temp    1ROW    2Bytes  150-151
Trigger 1ROW    2Bytes  151-153
TAIL    1ROW    4Bytes  154-157
---------STATUS PART-----------
TrigDAC 1ROW    2Bytes  158-159 0-1
INDAC   1ROW    2Bytes  160-161 2-3
TrigMode1ROW    2Bytes  162-163 4-5
BoardID 1ROW    2Bytes  164-165 6-7
TOTAL SIZE: 166

======RETURN DATA FORMAT=====
shape   (n, 40)
---------AXIS 0----------
board   0~n
---------AXIS 1-----------
NAME            LENGTH
CHARGE          36
Temp            1
TrigID          1
BOARDID         1
TimeTage        1
TOTAL LENGTH:   40
---------------------------
DATA TYPE:  np.array
dtype:      uint16
:return: np.array:all the valid board data in one event,shape(n,39) / None
np.array: timeTag, shape(n,) / None
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a99518aedc2ae8e974dc88593ecec63f0}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a99518aedc2ae8e974dc88593ecec63f0}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!dev\+Status@{dev\+Status}}
\index{dev\+Status@{dev\+Status}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{dev\+Status()}{devStatus()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+dev\+Status (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{dict }\end{DoxyParamCaption})}

\begin{DoxyVerb}返回设备配置状态
:return: key: boardID; value: tuple(threshold, bias voltage, trigger mode)
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a3508687b0b1a5bdb3e1667de3f18357d}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a3508687b0b1a5bdb3e1667de3f18357d}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!event\+Count@{event\+Count}}
\index{event\+Count@{event\+Count}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{event\+Count()}{eventCount()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+event\+Count (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{tuple }\end{DoxyParamCaption})}

\begin{DoxyVerb}返回采集到的事件数
:return: tuple(采集到的正常数据包个数, 采集到的有效事件数)
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_abec17520982f010a6364f849b4a84c00}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_abec17520982f010a6364f849b4a84c00}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!put\+Stop\+Order@{put\+Stop\+Order}}
\index{put\+Stop\+Order@{put\+Stop\+Order}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{put\+Stop\+Order()}{putStopOrder()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+put\+Stop\+Order (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}在数据队列_binaryBuff中添加一个停止信息None,当解析到None时,会抛出异常
:return:
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_add0f30cbf6de5e57c27996a44659da81}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_add0f30cbf6de5e57c27996a44659da81}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!read\+Size@{read\+Size}}
\index{read\+Size@{read\+Size}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{read\+Size()}{readSize()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+read\+Size (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{int }\end{DoxyParamCaption})}

\begin{DoxyVerb}:return: 每次读取数据的大小
\end{DoxyVerb}
 \mbox{\Hypertarget{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a88bc70f8bd15c217eb8c2486f2788821}\label{classMIS_1_1DatabaseTool_1_1dataLayer_1_1connectionTools_1_1Lumis__Decode_a88bc70f8bd15c217eb8c2486f2788821}} 
\index{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}!total\+Count@{total\+Count}}
\index{total\+Count@{total\+Count}!M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode@{M\+I\+S\+::\+Database\+Tool\+::data\+Layer\+::connection\+Tools\+::\+Lumis\+\_\+\+Decode}}
\subsubsection{\texorpdfstring{total\+Count()}{totalCount()}}
{\footnotesize\ttfamily def M\+I\+S.\+Database\+Tool.\+data\+Layer.\+connection\+Tools.\+Lumis\+\_\+\+Decode.\+total\+Count (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{int }\end{DoxyParamCaption})}

\begin{DoxyVerb}返回接受到到的总数据包个数: 采集到的正常数据包个数+空包数+中断次数
:return: int
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Database\+Tool/data\+Layer/connection\+Tools.\+py\end{DoxyCompactItemize}
